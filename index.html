<head>
  <title>Envy Snap</title>
  <link rel="stylesheet" href="style.css">
        <meta charset="utf8" />
        <meta property="og:title" content="Envy Snap" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta
          property="og:description"
          content="Support in a snap. Generate whatever you want."
        />
</head>
<body>
  <style>
</style>
  
<p style="position: absolute; top: 20px; left:0; padding: 15px; height: calc(100% - 35px)" id="response"></p>
  <div id="chat-container" style="position: absolute; bottom: 10px; width: calc(100% - 35px);">
        <div style="display: flex;">
        <input type="file" id="image" style="display: none;">
        <button style="min-width: 50px; height: 40px; margin-right: 10px; padding-top: 5px; border-radius: 4px;" onclick="openFile()"><img src="./Assets/paperclip.svg"></button>
        <input style="height: 34px; width: calc(100% - 120px); border-radius: 4px; padding-left: 15px;" type="text" id="message" placeholder="Ask me anything">
        <button style="min-width: 50px; height: 40px; margin-left: 10px; padding-top: 5px; border-radius: 4px;" onclick="sendMessage()"><img src="./Assets/arrow-up-from-line.svg"></button>
    </div>
<script>
    async function sendMessage() {
  let message = document.getElementById("message").value;
  let imageInput = document.getElementById("image").files[0];

  if (!message) {
    alert("Enter your message first")
      return;
  }

  let formData = new FormData();
  formData.append("message", message);
  if (imageInput) {
      formData.append("image", imageInput);
  }

  try {
      let response = await fetch("http://104.171.203.107:6969/chat", {
          method: "POST",
          body: formData
      });

      let data = await response.json();
      document.getElementById("response").innerText = data.response;
  } catch (error) {
    alert("Error generating a response")
  }
}
function openFile() {
  document.getElementById('image').click();
}
</script>
</body>
